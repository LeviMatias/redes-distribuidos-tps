import sys
from lib.client_udp import Client_udp
from lib.client_udp_gbn import Client_udp_gbn
from lib.file_manager import FileManager
from lib.argument_parser import ArgParser
from lib.printer import VerbosePrinter


if __name__ == "__main__":

    ArgParser.check_client_side_args(sys.argv)

    help, host, port, path, name, printer = ArgParser.parse_client_side(sys.argv)

    if not help:
        try:
            client = Client_udp_gbn(host, port, FileManager(), printer)
            client.do_download(path, name)
        except ConnectionResetError:
            print("Could not find a server running at the provided address")

